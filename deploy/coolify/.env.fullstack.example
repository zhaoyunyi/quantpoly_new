# ===============================================
# QuantPoly 全栈（frontend + backend + postgres）
# Coolify 环境变量模板
# ===============================================

# ---------- PostgreSQL ----------
POSTGRES_USER=quantpoly
POSTGRES_PASSWORD=please_change_me
POSTGRES_DB=quantpoly

# ---------- 域名 ----------
# 前端正式域名（浏览器访问）
FRONTEND_PUBLIC_ORIGIN=https://app.example.com
# 后端正式域名（浏览器请求 API）
BACKEND_PUBLIC_ORIGIN=https://api.example.com

# ---------- Frontend Build ----------
# 重要：Vite 在构建阶段读取该变量，必须填后端公网 URL
VITE_BACKEND_ORIGIN=https://api.example.com

# ---------- Backend CORS ----------
# 逗号分隔；必须是显式 origin，不能用 *
BACKEND_CORS_ALLOWED_ORIGINS=https://app.example.com
BACKEND_CORS_ALLOW_CREDENTIALS=true
BACKEND_CORS_ALLOW_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
BACKEND_CORS_ALLOW_HEADERS=*

# ---------- Auth Cookie ----------
# 生产建议为 true
USER_AUTH_COOKIE_SECURE=true
# 同站点子域场景推荐 lax；跨站点必须 none（且 secure=true）
USER_AUTH_COOKIE_SAMESITE=lax
# 可选：共享子域 cookie 时设置为 .example.com
USER_AUTH_COOKIE_DOMAIN=

# ---------- Backend Runtime ----------
BACKEND_MARKET_DATA_PROVIDER=inmemory
BACKEND_JOB_EXECUTOR_MODE=inprocess

# ---------- Alpaca（可选） ----------
BACKEND_ALPACA_API_KEY=
BACKEND_ALPACA_API_SECRET=
BACKEND_ALPACA_BASE_URL=
BACKEND_ALPACA_DATA_URL=
