# 前端架构规范（FrontendArchitectureSpec）

## 1. 分层原则

前端代码按以下职责分层：

- `app`：应用启动、路由、全局 Provider
- `pages`：页面编排层
- `widgets`：页面级复合组件
- `features`：业务特性组件与交互逻辑
- `entities`：领域实体展示与本地行为
- `shared`：通用工具、基础 UI、常量

## 2. 边界原则

- 前端不得直接访问数据库或任何后端内部存储。
- 前端通过 `frontend_api_client` 调用后端公开 API。
- 鉴权状态以前端缓存为准、以后端校验结果为最终真值。

## 3. 契约一致性

- 请求/响应类型必须与后端契约保持一致。
- API 错误码必须映射到统一前端错误模型。
- 版本升级时需保留最小兼容窗口并提供迁移说明。

## 4. 测试策略

- 单元测试：组件渲染与状态分支。
- 集成测试：页面流程与接口交互（Mock API）。
- E2E 测试：覆盖登录、策略创建、回测提交、交易下单、告警处理主链路。
