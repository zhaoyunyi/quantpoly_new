## Context

源项目具备较完整的用户管理路由，但当前迁移仓库更偏认证最小闭环。产品愿景要求支持用户分层（Level1/Level2）与可治理运营。

## Goals / Non-Goals

- Goals:
  - 提供用户“自助操作 + 管理操作”双路径。
  - 管理动作可审计、可追溯、可拒绝越权。
  - 统一密码变更后的凭证失效语义。
- Non-Goals:
  - 不引入前端兼容层。
  - 不在本变更中处理邮件模板/外部通知通道实现细节。

## Decisions

- Decision: 用户自助与管理员治理分离为两个路由组。
  - 自助接口：`/users/me/*`
  - 管理接口：`/admin/users/*`
- Decision: 密码变更后触发会话失效（至少失效当前用户历史 session）。
- Decision: 管理员动作统一写入治理审计。

## Risks / Trade-offs

- 风险：批量会话失效会影响在线体验。
  - 缓解：提供“仅当前设备失效/全部失效”策略开关。
- 风险：管理员能力过宽导致误操作。
  - 缓解：高风险动作采用确认令牌 + 审计追踪。

## Migration Plan

1. 在 `user-auth` 领域模型中引入用户状态与等级变更规则。
2. 先实现查询与资料更新，再实现密码变更与会话失效。
3. 接入管理员治理动作目录与审计。
4. 加入 BDD 场景测试并跑 OpenSpec 严格校验。

## Open Questions

- 用户等级是否允许管理员跨级批量修改？
- 密码修改是否需要旧密码二次验证（对管理员重置除外）？
